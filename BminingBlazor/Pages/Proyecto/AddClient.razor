@page "/Cliente"
@using Models
@using BminingBlazor.Services
@using Models.Project
@inject IClientDataService ClientDataService
@inject IProjectDataService ProjectDataService
@inject NavigationManager NavigationManager
@inject AuthenticationStateProvider AuthenticationStateProvider
@attribute [Authorize(Roles = "Administracion")]
<h3>Agregar Cliente</h3>

<EditForm Model="@_newClient" OnValidSubmit="@InsertCliente">
    <DataAnnotationsValidator />
    <ValidationSummary />
    <label for="inputNombres">Nombre Cliente:</label>
    <InputText id="Nombre_Cliente" @bind-Value="_newClient.Nombre_Cliente" />
    <MatButton type="submit" class="btn btn-primary">Guardar</MatButton>

</EditForm>

@code {
    private ClientModel _newClient = new ClientModel();

    private async Task InsertCliente()
    {
        var cliente = new ClientModel()
        {
            Nombre_Cliente = _newClient.Nombre_Cliente,
        };
        await ClientDataService.CreateClient(_newClient.Nombre_Cliente);

        NavigationManager.NavigateTo("/Proyectos");
    }
}
